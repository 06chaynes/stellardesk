<!doctype html>

<html lang='en'>

  <head>

    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='Stellar Desk' content='The dashboard for all things Stellar!'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <title>Stellar Desk</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name='mobile-web-app-capable' content='yes'>
    <link rel='icon' sizes='192x192' href='images/favicon.png'>

    <!-- Add to homescreen for Safari on iOS -->
    <meta name='apple-mobile-web-app-capable' content='yes'>
    <meta name='apple-mobile-web-app-status-bar-style' content='black'>
    <meta name='apple-mobile-web-app-title' content='Stellar Desk'>
    <link rel='apple-touch-icon-precomposed' href='images/favicon.png'>

    <link rel='shortcut icon' href='images/favicon.png'>

    <link rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons'>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Montserrat' type='text/css'>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans' type='text/css'>

    <link rel='stylesheet' href='material.min.css'>  <!-- <link rel='stylesheet' href='https://code.getmdl.io/1.3.0/material.blue-indigo.min.css'> -->
    <link rel='stylesheet' href='style.css'>

    <script src='material.min.js'></script>  <!-- <script defer src='https://code.getmdl.io/1.3.0/material.min.js'></script> -->
    <script src='Chart.min.js'></script>
    <script src='utils.js'></script>
    <script src='stellar-sdk.min.js'></script>

  </head>

  <!--class='mdl-color--blue' is the most awesome thing ever!!!-->
  <!-- mdl-color--grey-900 -->
  <!-- mdl-color-text--white -->
  <!-- https://material.io/icons/ -->
  <!-- https://getmdl.io/started/ -->
  <!-- https://material.io/guidelines/style/color.html#color-color-palette -->
  <!-- https://getmdl.io/customize/index.html -->
  <!-- https://getmdl.io/components/index.html#tables-section -->
  <body>

    <div class='demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header'>

      <!-- ---------------------------------------------------------------------- -->
      <header class='demo-header mdl-layout__header mdl-color--blue mdl-color-text--white'> <!--header color!!!!-->
        <div class='mdl-layout__header-row'>
          <span class='mdl-layout-title'>Stellar Desk <div id='clock0' style='display:inline; margin-left:1em; font-size:14px'></div></span>
          <div class='mdl-layout-spacer'></div>

          <!-- <div class='mdl-textfield mdl-js-textfield mdl-textfield--expandable'>
            <label class='mdl-button mdl-js-button mdl-button--icon' for='search'><i class='material-icons'>search</i></label>
            <div class='mdl-textfield__expandable-holder'>
              <input class='mdl-textfield__input' type='text' id='search'>
              <label class='mdl-textfield__label' for='search'>Account ID . . .</label>
            </div>
          </div> -->

          <button class='mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon' id='hdrbtn'><i class='material-icons'>more_vert</i></button>
          <div class='mdl-tooltip mdl-tooltip--large' for='hdrbtn'>Panels</div>
          <ul class='mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right' for='hdrbtn'>
            <a class='mdl-menu__item' href='index.html'>Metrics</a>
            <a class='mdl-menu__item' href='ledgers.html'>Ledgers</a>
            <a class='mdl-menu__item' href='transactions.html'>Transactions</a>
            <a class='mdl-menu__item' href='operations.html'>Operations</a>
            <a class='mdl-menu__item' href='effects.html'>Effects</a>
            <!-- <a class='mdl-menu__item' href='account.html'>Account</a> -->
          </ul>
        </div>
      </header>

      <!-- ---------------------------------------------------------------------- -->
      <div class='demo-drawer mdl-layout__drawer mdl-color--grey-900 mdl-color-text--blue-grey-50'>

        <header class='demo-drawer-header'>  <!-- THIS specifies the HEIGHT of the top-left dark corner! -->
          <img src='images/favicon.png' class='demo-avatar'>
          <div class='demo-avatar-dropdown'>
            <!-- <span>Stellar</span> -->

            <div class='mdl-layout-spacer'></div>
            <button id='accbtn' class='mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon'>
              <i class='material-icons'>arrow_drop_down</i>
              <!-- <span class='visuallyhidden'>Sites</span> -->
            </button>

            <ul class='mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect' for='accbtn'>
              <a class='mdl-menu__item' href='https://stellar.org'>Stellar.org</a>
              <a class='mdl-menu__item' href='https://www.stellar.org/developers/'>Developers</a>
              <a class='mdl-menu__item' href='http://slack.stellar.org/'>Slack</a>
              <a class='mdl-menu__item' href='https://github.com/stellar'>Github</a>
              <a class='mdl-menu__item' href='https://stellarchain.io/'>StellarChain</a>
              <!-- <a class='mdl-menu__item'><i class='material-icons'>add</i>Add account . . .</a> -->
            </ul>

          </div>
        </header>

        <nav class='demo-navigation mdl-navigation mdl-color--blue'> <!--menu color!!!-->
          <a class='mdl-navigation__link' href='index.html'><i class='material-icons' role='presentation'>account_balance</i>Metrics</a>
          <a class='mdl-navigation__link' href='ledgers.html'><i class='material-icons' role='presentation'>view_week</i>Ledgers</a>
          <a class='mdl-navigation__link' href='transactions.html'><i class='material-icons' role='presentation'>change_history</i>Transactions</a>
          <a class='mdl-navigation__link' href='operations.html'><i class='material-icons' role='presentation'>assessment</i>Operations</a>
          <a class='mdl-navigation__link' href='effects.html'><i class='material-icons' role='presentation'>gesture</i>Effects</a>
          <!-- <a class='mdl-navigation__link' href='account.html'><i class='material-icons' role='presentation'>dashboard</i>Account</a> -->
          <div class='mdl-layout-spacer'></div>
          <!-- <a class='mdl-navigation__link' href=''><i class='material-icons' role='presentation'>help_outline</i></a> -->
        </nav>

      </div>

      <!-- ---------------------------------------------------------------------- -->
      <main class='mdl-layout__content mdl-color--grey-100'>

        <div class='mdl-cell mdl-cell--12-col'>
          <div class='horizontal_scroll'>
            <div id='table0'></div>
          </div>
        </div>

      </main>

    </div>

    <a href='https://github.com/etale-cohomology/stellardesk' id='view-source' class='mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-color--blue mdl-color-text--white'>Source</a>

  </body>

  <script>
    // ------------------------------------------------- Global variables! We LOVE those!
    var HEADERS_LEDGERS = ['Closed at', 'Hash', 'Previous hash', 'Paging token', 'Sequence', 'Coins', 'Transactions', 'Operations', 'Max tx set size', 'Fee pool', 'Base fee', 'Base reserve'];
    var HEADERS_TRANSACTIONS = ['Created at', 'Hash', 'Ledger attribute', 'Paging token', 'Memo type', 'Account', 'Account sequence', 'Fee paid', 'Operations'];
    var HEADERS_OPERATIONS = ['ID', 'Type', 'Amount', 'Source account', 'Paging token', 'Price', 'Asset type'];
    var HEADERS_EFFECTS = ['ID', 'Type', 'Amount', 'Asset', 'Paging token', 'Account', 'Bought amount', 'Bought asset', 'Offer ID', 'Seller'];
    var HEADERS_ACCOUNT = [];

    var N_POINTS = 256;
    var MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    var N_POINTS_STELLAR = 16;
    var TIME;

    var red = window.colors.red;
    var blue = window.colors.blue;
    var grey = window.colors.grey;

    var data_dummy = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];
    var data_xlmbtc = [rand(), rand(), rand(), rand(), rand(), rand()]

    // ------------------------------------------------- Global variables! We LOVE those!
    function table_addrow(parent, element_str, datapoint){
      var element = document.createElement(element_str)
      element.appendChild(document.createTextNode(datapoint));
      parent.appendChild(element);
    }

    // ------------------------------------------------- Global variables! We LOVE those!
    // var config0 = {
    //   type: 'line',
    //   data: { datasets: [{label:'Poloniex', data:data_dummy, backgroundColor:red, borderColor:red, fill:false, lineTension:0, borderWidth:1},] },
    //   options: { elements:{point:{radius:0}}, responsive:true, title: {display:true, text:'Price: USD/XLM 30 min'}, tooltips: {mode:'index', intersect:false,}, hover: {mode:'nearest', intersect:true}, },
    // };
    // var config1 = {
    //   type: 'line',
    //   data: { datasets: [{label: 'Poloniex', data:data_dummy, backgroundColor:red, borderColor:red, fill:false, lineTension:0, borderWidth:1},] },
    //   options: { elements:{point:{radius:0}}, responsive:true, title: {display:true, text:'Price: BTC/XLM 30 min'}, tooltips: {mode:'index', intersect:false,}, hover: {mode:'nearest', intersect:true},
    //   },
    // };
    // var config2 = {
    //   type: 'bar',
    //   data: { datasets: [{label: 'Poloniex', data:data_dummy, backgroundColor:red, borderColor:red, fill:false, lineTension:0, borderWidth:1},] },
    //   options: { responsive:true, title: {display:true, text:'Volume: USD/XLM 30 min'}, tooltips: {mode:'index',intersect:false,}, hover: {mode:'nearest', intersect:true},
    //   },
    // };
    // var config3 = {
    //   type: 'bar',
    //   data: { datasets: [{label: 'Poloniex', data:data_dummy, backgroundColor:red, borderColor:red, fill:false, lineTension:0, borderWidth:1},] },
    //   options: { responsive:true, title: {display:true, text:'Volume: BTC/XLM 30 min'}, tooltips: {mode:'index', intersect:false,}, hover: {mode:'nearest', intersect:true},
    //   },
    // };

    // // ------------------------------------------------- Initial load!
    // var context0 = document.getElementById('chart0').getContext('2d');
    // var context1 = document.getElementById('chart1').getContext('2d');
    // var context2 = document.getElementById('chart2').getContext('2d');
    // var context3 = document.getElementById('chart3').getContext('2d');

    // window.linechart0 = new Chart(context0, config0);
    // window.linechart1 = new Chart(context1, config1);
    // window.linechart2 = new Chart(context2, config2);
    // window.linechart3 = new Chart(context3, config3);

    // --------------------------------------------------------------------------------------------

    function time(){
      date = new Date();
      TIME = Math.floor(date / 1000);  // UNIX timestamp! Seconds since 1 January 1970 00:00:00 UTC!
      // document.getElementById('clock').innerText = TIME;
      document.getElementById('clock0').innerText = MONTHS[date.getMonth()]+' '+date.getDate()+' '+date.getHours()+':'+date.getMinutes()+':'+date.getSeconds();
      setTimeout(time, 1000);
    }
    time();

    // --------------------------------------------------------------------------------------------
    var HTTPClient = function() {
      this.get = function(url, callback){
        var request = new XMLHttpRequest();
        request.onreadystatechange = function(){ 
          if(request.readyState==4 && request.status==200)
            callback(request.responseText);
        }
        request.open('GET', url, true);            
        request.send(null);
      }
    }

    // -------
    var client0 = new HTTPClient();
    var chart_period = 1800;  // Valid values @ Poloniex (secs): 300 900 1800 7200 14400 86400
    var chart_start = TIME - chart_period*N_POINTS;
    var chart_end = TIME;
    var poloniex_usdxlm = 'https://poloniex.com/public?command=returnChartData&currencyPair=USDT_STR&start='+chart_start+'&end='+chart_end+'&period='+chart_period;

    client0.get(poloniex_usdxlm, function(response){
      var response = JSON.parse(response)
      // for(var i=0; i<response.length; i++){
      //   console.log(response[i].date, response[i].open, response[i].close, response[i].volume, response[i].weightedAverage);
      // }

      for(var i=0; i<response.length; i++){
        var date = new Date(Number(response[i].date) * 1000);
        var stamp = MONTHS[date.getMonth()]+' '+date.getDate()+' '+date.getHours()+':'+date.getMinutes();
        linechart0.data.labels[i] = stamp;
        linechart0.data.datasets[0].data[i] = response[i].close;
      }
      linechart0.update();

      for(var i=0; i<response.length; i++){
        var date = new Date(Number(response[i].date) * 1000);
        var stamp = MONTHS[date.getMonth()]+' '+date.getDate()+' '+date.getHours()+':'+date.getMinutes();
        linechart2.data.labels[i] = stamp;
        linechart2.data.datasets[0].data[i] = response[i].volume;
      }
      linechart2.update();

    });

    // -------
    var client1 = new HTTPClient();
    var chart_period = 1800;  // Valid values @ Poloniex (secs): 300 900 1800 7200 14400 86400
    var chart_start = TIME - chart_period*N_POINTS;
    var chart_end = TIME;
    var poloniex_btcxlm = 'https://poloniex.com/public?command=returnChartData&currencyPair=BTC_STR&start='+chart_start+'&end='+chart_end+'&period='+chart_period;

    client1.get(poloniex_btcxlm, function(response){
      var response = JSON.parse(response)

      for(var i=0; i<response.length; i++){
        var date = new Date(Number(response[i].date) * 1000);
        var stamp = MONTHS[date.getMonth()]+' '+date.getDate()+' '+date.getHours()+':'+date.getMinutes();
        linechart1.data.labels[i] = stamp;
        linechart1.data.datasets[0].data[i] = response[i].close;
      }
      linechart1.update();

      for(var j=0; j<response.length; j++){
        var date = new Date(Number(response[j].date) * 1000);
        var stamp = MONTHS[date.getMonth()]+' '+date.getDate()+' '+date.getHours()+':'+date.getMinutes();
        linechart3.data.labels[j] = stamp;
        linechart3.data.datasets[0].data[j] = response[j].volume;
      }
      linechart3.update();
    });

    // --------------------------------------------------------------------------------------------
    console.log(StellarSdk);  // Just checking it works!

    // ---------------------
    var server = new StellarSdk.Server('https://horizon.stellar.org');
    var account_id = 'GAOXVBKHGKH3UNAK4EIG3XVAWMA4B7Y3LF42EMIKJINVMLTNXYGHUQWM';

    // ---------------------------------------------------------------------- Ledgers!
    function ledgers_get(n){
      server.ledgers().limit(n).order('desc').call().then(ledgers_callback);
    }

    function ledgers_callback(response){
      // console.log(response.records);

      var table_div = document.getElementById('table0')
      var table = document.createElement('table')
      var table_head = document.createElement('thead')
      var table_body = document.createElement('tbody')

      table_div.className = 'mdl-data-table mdl-shadow--2dp table';  // mdl-js-data-table
      table.appendChild(table_head);
      table.appendChild(table_body);

      // First row (aka. heading row)!
      var tr = document.createElement('tr');
      table_body.appendChild(tr);
      for(i=0; i < HEADERS_LEDGERS.length; i++){  // Create header row!
        table_addrow(tr, 'th', HEADERS_LEDGERS[i]);
      }

      // All other rows!
      for(i=0; i<response.records.length; i++){  // Loop through each row!
        var tr = document.createElement('tr');  // `tr` means TABLE ROW, me thinks

        var ledger = response.records[i];
        table_addrow(tr, 'td', ledger.closed_at);
        table_addrow(tr, 'td', ledger.hash);
        table_addrow(tr, 'td', ledger.prev_hash);
        table_addrow(tr, 'td', ledger.paging_token);
        table_addrow(tr, 'td', ledger.sequence);
        table_addrow(tr, 'td', Math.floor(ledger.total_coins));
        table_addrow(tr, 'td', ledger.transaction_count);
        table_addrow(tr, 'td', ledger.operation_count);
        table_addrow(tr, 'td', ledger.max_tx_set_size);
        table_addrow(tr, 'td', Math.floor(ledger.fee_pool));
        table_addrow(tr, 'td', ledger.base_fee);
        table_addrow(tr, 'td', Math.floor(ledger.base_reserve));

        table_body.appendChild(tr);
      }

      table_div.appendChild(table)  // THIS actually appends the created data to the html div!

    }

    // ----------------------------------------------------------------------
    function transactions_get(n){
      server.transactions().limit(n).order('desc').call().then(transactions_callback);
    }
    function transactions_callback(response){
      // console.log(response.records);

      var table_div = document.getElementById('table0')
      var table = document.createElement('table')
      var table_head = document.createElement('thead')
      var table_body = document.createElement('tbody')

      table_div.className = 'mdl-data-table mdl-shadow--2dp table';  // mdl-js-data-table
      table.appendChild(table_head);
      table.appendChild(table_body);

      // First row (aka. heading row)!
      var tr = document.createElement('tr');
      table_body.appendChild(tr);
      for(i=0; i < HEADERS_TRANSACTIONS.length; i++){  // Create header row!
        table_addrow(tr, 'th', HEADERS_TRANSACTIONS[i]);
      }

      // All other rows!
      for(i=0; i<response.records.length; i++){  // Loop through each row!
        var tr = document.createElement('tr');  // `tr` means TABLE ROW, me thinks

        var transaction = response.records[i];
        table_addrow(tr, 'td', transaction.created_at);
        table_addrow(tr, 'td', transaction.hash);
        table_addrow(tr, 'td', transaction.ledger_attr);
        table_addrow(tr, 'td', transaction.paging_token);
        table_addrow(tr, 'td', transaction.memo_type);
        table_addrow(tr, 'td', transaction.source_account);
        table_addrow(tr, 'td', transaction.source_account_sequence);
        table_addrow(tr, 'td', transaction.fee_paid);
        table_addrow(tr, 'td', transaction.operation_count);

        table_body.appendChild(tr);
      }

      table_div.appendChild(table)  // THIS actually appends the created data to the html div!

    }

    // ----------------------------------------------------------------------
    function operations_get(n){
      server.operations().limit(n).order('desc').call().then(operations_callback);
    }
    function operations_callback(response){
      // console.log(response.records);

      var table_div = document.getElementById('table0')
      var table = document.createElement('table')
      var table_head = document.createElement('thead')
      var table_body = document.createElement('tbody')

      table_div.className = 'mdl-data-table mdl-shadow--2dp table';  // mdl-js-data-table
      table.appendChild(table_head);
      table.appendChild(table_body);

      // First row (aka. heading row)!
      var tr = document.createElement('tr');
      table_body.appendChild(tr);
      for(i=0; i < HEADERS_OPERATIONS.length; i++){  // Create header row!
        table_addrow(tr, 'th', HEADERS_OPERATIONS[i]);
      }

      // All other rows!
      for(i=0; i<response.records.length; i++){  // Loop through each row!
        var tr = document.createElement('tr');  // `tr` means TABLE ROW, me thinks

        var operation = response.records[i];
        table_addrow(tr, 'td', operation.id);
        table_addrow(tr, 'td', operation.type);
        table_addrow(tr, 'td', operation.amount);
        table_addrow(tr, 'td', operation.source_account);
        table_addrow(tr, 'td', operation.paging_token);
        table_addrow(tr, 'td', operation.price);
        table_addrow(tr, 'td', operation.asset_type);
        // table_addrow(tr, 'td', operation.buying_asset_type);
        // table_addrow(tr, 'td', operation.selling_asset_code);
        // table_addrow(tr, 'td', operation.selling_asset_issuer);
        // table_addrow(tr, 'td', operation.selling_asset_type);
        // table_addrow(tr, 'td', operation.offer_id);
        // table_addrow(tr, 'td', operation.from);
        // table_addrow(tr, 'td', operation.to);
        // table_addrow(tr, 'td', operation.into);
        // table_addrow(tr, 'td', operation.account);

        table_body.appendChild(tr);
      }

      table_div.appendChild(table)  // THIS actually appends the created data to the html div!
    }

    // ----------------------------------------------------------------------
    function effects_get(n){
      server.effects().limit(n).order('desc').call().then(effects_callback);
    }
    function effects_callback(response){
      // console.log(response.records);

      var table_div = document.getElementById('table0')
      var table = document.createElement('table')
      var table_head = document.createElement('thead')
      var table_body = document.createElement('tbody')

      table_div.className = 'mdl-data-table mdl-shadow--2dp table';  // mdl-js-data-table
      table.appendChild(table_head);
      table.appendChild(table_body);

      // First row (aka. heading row)!
      var tr = document.createElement('tr');
      table_body.appendChild(tr);
      for(i=0; i < HEADERS_EFFECTS.length; i++){  // Create header row!
        table_addrow(tr, 'th', HEADERS_EFFECTS[i]);
      }

      // All other rows!
      for(i=0; i<response.records.length; i++){  // Loop through each row!
        var tr = document.createElement('tr');  // `tr` means TABLE ROW, me thinks

        var effect = response.records[i];
        table_addrow(tr, 'td', effect.id);
        table_addrow(tr, 'td', effect.type);
        table_addrow(tr, 'td', effect.amount);
        table_addrow(tr, 'td', effect.asset_type);
        table_addrow(tr, 'td', effect.paging_token);
        table_addrow(tr, 'td', effect.account);
        table_addrow(tr, 'td', effect.bought_amount);
        table_addrow(tr, 'td', effect.bought_asset_type);
        table_addrow(tr, 'td', effect.offer_id);
        table_addrow(tr, 'td', effect.seller);
        // table_addrow(tr, 'td', effect.sold_amount);
        // table_addrow(tr, 'td', effect.sold_asset_code);
        // table_addrow(tr, 'td', effect.sold_asset_issuer);
        // table_addrow(tr, 'td', effect.sold_asset_type);

        table_body.appendChild(tr);
      }

      table_div.appendChild(table)  // THIS actually appends the created data to the html div!
    }

    // ----------------------------------------------------------------------
    function payments_get(n){
      server.payments().limit(n).order('desc').call().then(payments_callback);
    }
    function payments_callback(response){
      html  = '';
      // console.log(response.records);

      for(var i=0; i<response.records.length; i++){
        var payment = response.records[i];
        html += '<code>';
        html += ' '+payment.id;
        html += ' '+payment.type;
        html += ' '+payment.amount;
        html += ' '+payment.asset_type;
        html += ' '+payment.from;
        html += ' '+payment.to;
        html += ' '+payment.paging_token;
        html += ' '+payment.source_account;
        html += ' '+payment.account_id;
        html += ' '+payment.starting_balance;
        html += ' '+payment.funder;
        html += '</code><br>';
      }

      var div = document.getElementById('payments');
      div.innerHTML = html;  // innerHTML is FASTER than DOM methods!
    }
    // ---------------------------------------------------------------------- Account!
    function account_get(account_id){
      server.accounts().accountId(account_id).call().then(account_callback);
    }

    function account_callback(response){
      html = '';

      var account = response;
      var balances = account.balances;
      console.log(account);
      html += ' '+account.id;
      html += ' '+account.account_id;
      html += ' '+account.sequence;
      html += '<br>';
      for(var i=0; i<balances.length; i++){
        html += ' '+balances[i].asset_type;
        html += ' '+balances[i].balance;
        html += '<br>';
      }

      var div = document.getElementById('account')
      div.innerHTML = html;
    }

    // ----------------------------------------------------------------------
    function update_all(){
      // ledgers_get(N_POINTS_STELLAR);
      transactions_get(N_POINTS_STELLAR);
      // operations_get(N_POINTS_STELLAR);
      // effects_get(N_POINTS_STELLAR);
      // payments_get(N_POINTS_STELLAR);
      // account_get(account_id);
    }

    // --------------------- Call active functions here!
    update_all();
  </script>

</html>
